{"version":3,"sources":["webpack:///./template/gallery-item-template.hbs","webpack:///./helpers/helpers.js","webpack:///./index.js"],"names":["Handlebars","__webpack_require__","module","exports","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias4","escapeExpression","user","call","name","hash","largeImageURL","useData","errorMessage","document","querySelector","searchForm","imageContainer","input","parseResp","Function","ErrorMsg","error","innerText","style","display","ellips","addEventListener","e","preventDefault","infScrollInstance","pageIndex","innerHTML","height","loadNextPage","discoveredItems","InfiniteScroll","path","corsPass","value","this","history","responseType","status","scrollThreshold","checkLastPage","on","response","event","_parseResp","images","hits","totalHits","markup","map","image","galleryItemTemplate","join","AddToDom","imagesLoaded","Masonry","itemSelector"],"mappings":"gFAAA,IAAAA,EAAiBC,EAAQ,QAEzBC,EAAAC,SAAAH,EAAA,SAAAA,GAAAI,SAAA,CAAiEC,SAAA,eAAAC,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACjE,IAAAC,EAAAC,EAAA,MAAAL,IAAAD,EAAAO,aAAA,GAA6EC,EAAAN,EAAAO,cAAAC,EAAAV,EAAAW,iBAE7E,8DACAD,EAH6E,mBAG7EL,EAAA,OAAAA,EAAAH,EAAAU,OAAA,MAAAX,IAAAW,KAAAX,IAAAI,EAAAG,GAAAH,EAAAQ,KAAAP,EAAA,CAAsKQ,KAAA,OAAAC,KAAA,GAAuBX,SAAaC,GAC1M,UACAK,EAL6E,mBAK7EL,EAAA,OAAAA,EAAAH,EAAAc,gBAAA,MAAAf,IAAAe,cAAAf,IAAAI,EAAAG,GAAAH,EAAAQ,KAAAP,EAAA,CAAwLQ,KAAA,gBAAAC,KAAA,GAAgCX,SAAaC,GACrO,YACCY,SAAA,yICRYC,EAAeC,SAASC,cAAc,cACtCC,EAAaF,SAASC,cAAc,gBACpCE,EAAiBH,SAASC,cAAc,YACxCG,EAAQJ,SAASC,cAAc,uBAC/BI,EAAY,IAAIC,SAAS,MAAM,0BAE/BC,EAAW,SAAAC,GAEpB,OADAT,EAAaU,UAAYD,EAClBT,EAAaW,MAAMC,QAAU,SCJlCC,aAASZ,SAASC,cAAc,mBAetCC,EAAWW,iBAAiB,SATP,SAAAC,GACjBA,EAAEC,iBACFC,EAAkBC,UAAY,EAC1Bd,EAAee,UAAU,GACzBnB,EAAaW,MAAMC,QAAU,OAC7BR,EAAeO,MAAMS,OAAS,OAC9BH,EAAkBI,iBAK1B,IAEIC,EAFY,GAKVL,EAAoB,IAAIM,IAAgBnB,EAAgB,CAC1DoB,KAAK,WACD,MAAUC,yGAEepB,EAAMqB,MAFxB,0BAIqBC,KAAKT,UAJ1B,gBAOXU,SAAS,EACTC,aAAc,OACdC,OAAQ,iBACRC,gBAAiB,IACjBC,cAAc,eAKlBf,EAAkBgB,GAAI,QAAS,WAE3B,OADApB,EAAOF,MAAMC,QAAU,OAChBJ,EAAS,mBAOnBS,EAAkBgB,GAAG,OAAQ,SAACC,EAAWC,GAAU,IAAAC,EAEZ9B,EAAU4B,GAAjCG,EAFmCD,EAExCE,KAAcC,EAF0BH,EAE1BG,UAEtB,MAAmB,KAAhBlC,EAAMqB,OAAgC,OAAhBrB,EAAMqB,MACpBlB,EAAS,uCAGH,IAAd+B,EACQ/B,EAAS,wCAGjBc,GAAmBiB,IAClB1B,EAAOF,MAAMC,QAAU,OACvBJ,EAAS,iBDtDQ,SAAA6B,GACrB,IAAMG,EAASH,EAAOI,IAAI,SAACC,GAAD,OAAWC,IAAoBD,KAAQE,KAAK,IACtExC,EAAee,UAAf,IAA8Bf,EAAee,UAAYqB,GCwDzDK,CAASR,GAETS,aAAc1C,EAAgB,WAC1B,IAAI2C,QAAQ3C,EAAgB,CACxB4C,aAAc,0BAMpB1B,GAAmB","file":"main.9822979c29e5202eee53.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"gallery__item\\\">\\n    <img alt=\\\"Picture of \"\n    + alias4(((helper = (helper = helpers.user || (depth0 != null ? depth0.user : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"user\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"\\\" src=\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \">\\n</li>\";\n},\"useData\":true});","import galleryItemTemplate from '../template/gallery-item-template.hbs';\r\n\r\nexport const errorMessage = document.querySelector('.no_return');\r\nexport const searchForm = document.querySelector('.search-form');\r\nexport const imageContainer = document.querySelector('.gallery');\r\nexport const input = document.querySelector('.search-form__input');\r\nexport const parseResp = new Function('res','return JSON.parse(res)');\r\n\r\nexport const ErrorMsg = error => {\r\n    errorMessage.innerText = error;\r\n    return errorMessage.style.display = \"block\";\r\n }\r\n\r\n\r\n\r\n export const AddToDom = images => {\r\n    const markup = images.map((image) => galleryItemTemplate(image)).join('');\r\n    imageContainer.innerHTML = `${imageContainer.innerHTML + markup}`\r\n }\r\n\r\n","import InfiniteScroll from 'infinite-scroll';\r\nimport { ErrorMsg , AddToDom , errorMessage , searchForm ,\r\n         imageContainer , parseResp, input } from './helpers/helpers';\r\nimport './styles.css';\r\nconst corsPass = \"https://cors-anywhere.herokuapp.com/\";\r\nconst key = \"13083162-0136df30d1856527dad6bba93\"\r\nconst ellips = document.querySelector(\".loader-ellips\");\r\n\r\n\r\n\r\n\r\n\r\nconst handleSubmit = e => {\r\n    e.preventDefault();\r\n    infScrollInstance.pageIndex = 1;\r\n        imageContainer.innerHTML='';\r\n        errorMessage.style.display = \"none\"\r\n        imageContainer.style.height = \"auto\"\r\n        infScrollInstance.loadNextPage();\r\n};\r\n\r\nsearchForm.addEventListener('submit', handleSubmit);\r\n\r\nconst perPage = 20;\r\n\r\nlet discoveredItems = perPage;\r\n\r\n\r\nconst infScrollInstance = new InfiniteScroll( imageContainer, {\r\n    path:function() {\r\n        return `${corsPass}https://pixabay.com/api/?`+\r\n                           `key=${key}`+\r\n                           `&q=${input.value}` +\r\n                           `&image_type=photo` +\r\n                           `&page=${this.pageIndex}` +\r\n                           `&per_page=${perPage}`;\r\n    },\r\n    history: false,\r\n    responseType: 'text',\r\n    status: '.loader-ellips',\r\n    scrollThreshold: 600,\r\n    checkLastPage:\".last_page\"\r\n});\r\n\r\n\r\n\r\ninfScrollInstance.on( 'error', function() {\r\n    ellips.style.display = \"none\";\r\n    return ErrorMsg(\"Network Error\");\r\n})\r\n\r\n\r\n\r\n\r\n\r\n infScrollInstance.on('load', (response , event) => {\r\n\r\n    const { hits:images , totalHits } = parseResp(response);\r\n\r\n    if(input.value === \"\" || input.value === null){\r\n        return ErrorMsg(\"Пожалуйста введите слово для поиска\");\r\n    }\r\n\r\n    if(totalHits === 0){\r\n        return ErrorMsg(\"Ничего не найдено по вашему запросу\");\r\n    }\r\n\r\n    if(discoveredItems >= totalHits ){\r\n        ellips.style.display = \"none\";\r\n        ErrorMsg(\"нет картинок\");\r\n\r\n     }\r\n\r\n    AddToDom(images);\r\n\r\n    imagesLoaded( imageContainer, function() {\r\n        new Masonry(imageContainer, {\r\n            itemSelector: '.gallery__item'\r\n          });\r\n      });\r\n\r\n \r\n\r\n      discoveredItems += 20\r\n\r\n});\r\n\r\n\r\n\r\n"],"sourceRoot":""}